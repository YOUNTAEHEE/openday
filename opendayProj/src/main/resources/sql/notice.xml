<?xml version="1.0" encoding="UTF-8"?>

<mapper namespace="mapper.notice">
<!-- =========== 클래스 문의 cls_inquery =============================================== -->
<!-- 1. 유저 아이디로 문의글 조회 -->
<select id="selectClsInquiry" parameterType="String" resultType="ClsInquiryDTO">
<![CDATA[
	select * from cls_inquiry where userId = #{id}
]]> 
</select>

<!-- 2. 문의목록 조회  -->
<select id="selectClsInquiryList" resultType="ClsInquiryDTO">
<![CDATA[
	select * from cls_inquiry
]]> 
</select>

<!-- 3. 문의글 삽입 -->
<insert id="insertClsInquiry" parameterType="ClsInquiryDTO">
<![CDATA[
	insert into cls_inquiry values (#{ciNum},#{ciTitle},#{ciContent},#{ciStatus},#{ciDate},#{ciSecret},#{ciUpdate},#{userId},#{clsId})
]]> 
</insert>



<!-- =========== 공지사항 문의 adm_inquiry  ===============================================-->
<!-- 1. 문의번호로 조회 -->
<select id="selectAdmInquiry" parameterType="Integer" resultType="AdmInquiryDTO">
<![CDATA[
	select * from adm_inquiry where adm_num = #{num}
]]> 
</select>

<!-- 2. 문의목록 조회  -->
<select id="selectAdmInquiryList" resultType="AdmInquiryDTO">
<![CDATA[
	select * from adm_inquiry
]]> 
</select>

<!-- 3. 문의 삽입 -->
<insert id="insertAdmInquiry" parameterType="AdmInquiryDTO">
<![CDATA[
	insert into adm_inquiry values (#{admNum},#{admTitle},#{admContent},#{admType},
	#{admUploadDate},#{admAnContent},#{admStatus},#{admAnDate},#{userId})
]]> 
</insert>

<!-- =========== 문의 답변 answer =============================================== -->

<!-- 1. 문의번호로 답변 조회 -->
<select id="selectAnswer" parameterType="Integer" resultType="AnswerDTO">
<![CDATA[
	select ans_num as ansNum, ans_content as ansContent, ans_date as ansDate, ci_num as ciNum 
	from answer where ans_num = #{num}
]]> 
</select>

<!-- 2. 답변 생성 -->
<insert id="insertAnswer" parameterType="AnswerDTO">
<![CDATA[
	insert into answer values (#{ansNum},#{ansContent},#{ansDate},#{ciNum})
]]> 
</insert>

 
<!-- 후기 review -->

<!-- 1. 유저 id로 리뷰 조회 -->
<select id="selectReviewByUserId" parameterType="String" resultType="ReviewDTO">
<![CDATA[
	select rv_num as rvNum, rv_title as rvTitle, rv_content as rvContent, rv_date as rvDate,
		   rv_star as rvStar, user_id as userId, scd_num as scdNum 
	from review where user_id = #{id}
]]> 
</select>

<!-- 2. 클래스 일정 번호로 리뷰목록 조회  -->
<select id="selectReviewByClsNum" parameterType="Integer" resultType="ReviewDTO">
<![CDATA[
	select rv_num as rvNum, rv_title as rvTitle, rv_content as rvContent, rv_date as rvDate,
		   rv_star as rvStar, user_id as userId, scd_num as scdNum 
	from review where scd_num = #{scdNum}
]]> 
</select>

<!-- 3. 문의 삽입 -->
<insert id="insertReview" parameterType="ReviewDTO">
<![CDATA[
	insert into review values (#{rvNum},#{rvTitle},#{rvContent},#{rvDate},
	#{rvStar},#{userId},#{scdNum})
]]> 
</insert>

</mapper> 
