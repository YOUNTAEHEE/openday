<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
						"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
						
<mapper namespace="mapper.user">
	<!--회원가입  -->
	<insert id="insertUser" parameterType="com.kosta.openday.user.dto.UserDTO">
		<![CDATA[
			insert into user values 
			(#{userId}, #{userPassword}, #{userName}, #{userNickname}, #{userTel},#{userAddress}, #{userEmail}, #{userBirth},
			'1', null, 'y', CURDATE(), null, '1', null)
		]]> 
	</insert>
	<!--선호카테고리 저장 -->
	<update id="updateUserPrefer" parameterType="java.util.Map">
		<![CDATA[
			update user set user_preference = #{prefer} where user_id=#{id}  
			
		]]> 
	</update>
	<!--선호카테고리 받아오기 -->
	<select id="selectUserPrefer" parameterType="String" resultType="String">
		<![CDATA[
			select user_preference from user where user_id=#{id} 
		]]> 
	</select>
	
	<!-- 파일업로드(유저프로필)  -->
	<insert id="insertUserFile" parameterType="com.kosta.openday.user.dto.UserFileDTO">
		<![CDATA[
		insert into file values(${fileNum},${fileClassification},${fileOriginalName},${fileSaveName},${fileSize},CURDATE())
		]]> 
	</insert>
	
	<!-- 프로필수정 -->
	<update id="updateUser" parameterType="java.util.Map">
		<![CDATA[
		update user set user_nickname=${nickname}, user_tel=${tel} where user_id=${id}
		]]> 
	</update> 
	
	<!-- select user -->
	<select id="selectUser" parameterType="String" resultType="com.kosta.openday.user.dto.UserProfileVO">
		<![CDATA[ 		
		select user_id as userId, user_password as userPassword, user_name as userName, user_nickname as userNickname, user_address as userAddress, user_email as userEmail, fil_num as userFileNum 
		from user where user_id=${id}
		]]> 		 
	</select>
	
</mapper>